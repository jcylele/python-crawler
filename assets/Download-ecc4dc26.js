import{D as L,a as E,b as I,c as R,A as T}from"./DownloadCtrl-5af7ecc1.js";import{m as j,j as W,a as C,l as U,D as q,k as H,_ as J,o as s,c as i,w as o,r as a,b as t,f as y,g as f,F as h,d as u,t as V,e as A}from"./index-172ad7fb.js";import{D as K,A as M,f as O}from"./DownloadLimit-a22b7995.js";import{D as r}from"./Enums-e33e938b.js";import"./Consts-b58d017b.js";const P={components:{DownloadLimit:K},data(){return{down_type:r.New,download_limit:new L,actor_category:0,actor_count:0,actor_urls:[]}},watch:{async actor_category(l,n){if(this.down_type!==r.Category)return;const p=new M;p.category_list=[l];const[b,c]=await O(p);b&&(this.actor_count=c)}},computed:{...j(C,{group_list:"sorted_list",down_group_list:"down_list"}),by_category(){return this.down_type===r.Category},by_url(){return this.down_type===r.Url},down_type_list(){return[{label:"New Actors",value:r.New},{label:"By Category",value:r.Category},{label:"Specific Urls",value:r.Url}]}},methods:{...W(C,{getGroupsFromServer:"getFromServer",getGroup:"get"}),checkActorCategory(){return this.getGroup(this.actor_category)==null?(U("choose correct category"),!1):!0},async download(){if(!this.checkActorCategory())return;let l=!1,n="";switch(this.down_type){case r.New:{[l,n]=await R(this.actor_category,this.download_limit);break}case r.Category:[l,n]=await I(this.actor_category,this.download_limit);break;case r.Url:if(this.actor_urls.length==0){U("no url is assigned");return}[l,n]=await E(this.actor_category,this.download_limit,this.actor_urls);break;default:q("invalid download type");break}l&&H("download started")},onRemoveUrl(l){this.actor_urls.splice(l,1)},onAddUrl(){const l=new T;this.actor_urls.push(l)}},async mounted(){await this.getGroupsFromServer()}};function Q(l,n,p,b,c,_){const D=a("el-radio-button"),x=a("el-radio-group"),N=a("DownloadLimit"),w=a("el-text"),S=a("el-option"),z=a("el-select"),d=a("el-space"),v=a("svg-icon"),k=a("el-input"),g=a("el-form-item"),F=a("el-form"),B=a("el-button");return s(),i(d,{direction:"vertical",fill:!0},{default:o(()=>[t(x,{modelValue:c.down_type,"onUpdate:modelValue":n[0]||(n[0]=e=>c.down_type=e),size:"large"},{default:o(()=>[(s(!0),y(h,null,f(_.down_type_list,e=>(s(),i(D,{label:e.value},{default:o(()=>[u(V(e.label),1)]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"]),t(N,{download_limit:c.download_limit,border:""},null,8,["download_limit"]),t(d,{direction:"horizontal",class:"with-border"},{default:o(()=>[t(w,null,{default:o(()=>[u(" Actor Category ")]),_:1}),t(z,{modelValue:c.actor_category,"onUpdate:modelValue":n[1]||(n[1]=e=>c.actor_category=e),placeholder:"Select"},{default:o(()=>[(s(!0),y(h,null,f(l.down_group_list,e=>(s(),i(S,{key:e.group_id,label:e.group_name,value:e.group_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),_.by_category?(s(),i(w,{key:0},{default:o(()=>[u(" (including "+V(c.actor_count)+" actors) ",1)]),_:1})):A("",!0)]),_:1}),_.by_url?(s(),i(d,{key:0,direction:"vertical",class:"with-border"},{default:o(()=>[t(d,{direction:"horizontal",size:"large"},{default:o(()=>[t(w,null,{default:o(()=>[u(" Actor Urls ")]),_:1}),t(v,{size:"24px",name:"add",onClick:_.onAddUrl},null,8,["onClick"])]),_:1}),(s(!0),y(h,null,f(c.actor_urls,(e,G)=>(s(),i(d,{direction:"horizontal"},{default:o(()=>[t(F,{model:e,inline:!0},{default:o(()=>[t(g,{label:"Name"},{default:o(()=>[t(k,{modelValue:e.actor_name,"onUpdate:modelValue":m=>e.actor_name=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(g,{label:"Url"},{default:o(()=>[t(k,{modelValue:e.full_url,"onUpdate:modelValue":m=>e.full_url=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(g,null,{default:o(()=>[t(v,{size:"30px",name:"remove",onClick:m=>_.onRemoveUrl(G)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:2},1024))),256))]),_:1})):A("",!0),t(B,{type:"primary",onClick:_.download},{default:o(()=>[u("Download")]),_:1},8,["onClick"])]),_:1})}const oe=J(P,[["render",Q],["__scopeId","data-v-c7b2e4f5"]]);export{oe as default};
