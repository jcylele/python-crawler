import{s as F,e as S,g as q,f as B}from"./DownloadCtrl-f6ac3cc0.js";import{k as y,_ as N,o,c,w as e,r,b as t,d as a,t as d,e as m,f as h,g,F as b}from"./index-2b6b099b.js";import"./Enums-e33e938b.js";const V={name:"Tasks",data(){return{task_list:[]}},methods:{async stopTask(s){const[_,x]=await F(s);_&&(y("stop task succeed"),this.task_list.splice(this.task_list.findIndex(z=>z.uid===s),1))},async stopAll(){const[s,_]=await S();s&&(y("stop all task succeed"),this.task_list=[])},async getAll(){const[s,_]=await q();s&&(this.task_list=_)},async clean(){const[s,_]=await B();s&&y("clean outdated files succeed")}},mounted(){this.getAll()}};function I(s,_,x,z,C,k){const u=r("el-table-column"),i=r("el-tag"),n=r("el-space"),p=r("el-button"),v=r("el-table"),T=r("el-main"),A=r("el-container");return o(),c(A,null,{default:e(()=>[t(T,null,{default:e(()=>[t(n,{direction:"vertical"},{default:e(()=>[t(v,{data:C.task_list,border:"",class:"wrap_line"},{default:e(()=>[t(u,{prop:"desc",label:"task","min-width":"300px"}),t(u,{prop:"download_limit",label:"limit","min-width":"200px"},{default:e(l=>[t(n,{direction:"vertical"},{default:e(()=>[t(n,{direction:"horizontal"},{default:e(()=>[l.row.download_limit.actor_count>0?(o(),c(i,{key:0,type:"success",size:"small",effect:"dark"},{default:e(()=>[a(d(l.row.download_limit.actor_count)+" actors ",1)]),_:2},1024)):m("",!0),t(i,{type:"success",size:"small",effect:"dark"},{default:e(()=>[a(d(l.row.download_limit.post_desc()),1)]),_:2},1024)]),_:2},1024),t(n,{direction:"horizontal"},{default:e(()=>[l.row.download_limit.total_file_size>0?(o(),c(i,{key:0,type:"success",size:"small",effect:"dark"},{default:e(()=>[a(" Total "+d(l.row.download_limit.total_file_size_desc()),1)]),_:2},1024)):m("",!0),l.row.download_limit.file_size>0?(o(),c(i,{key:1,type:"success",size:"small",effect:"dark"},{default:e(()=>[a(" Single "+d(l.row.download_limit.file_size_desc()),1)]),_:2},1024)):m("",!0)]),_:2},1024),t(n,{direction:"horizontal"},{default:e(()=>[l.row.download_limit.allow_img?(o(),c(i,{key:0,type:"success",size:"small",effect:"dark"},{default:e(()=>[a(" images ")]),_:1})):m("",!0),l.row.download_limit.allow_video?(o(),c(i,{key:1,type:"success",size:"small",effect:"dark"},{default:e(()=>[a(" videos ")]),_:1})):m("",!0)]),_:2},1024)]),_:2},1024)]),_:1}),t(u,{prop:"worker_count",label:"workers","min-width":"200px"},{default:e(l=>[t(n,{direction:"vertical"},{default:e(()=>[(o(!0),h(b,null,g(l.row.worker_count,(w,f)=>(o(),c(i,{size:"small",effect:"dark",key:f},{default:e(()=>[a(d(f)+":"+d(w),1)]),_:2},1024))),128))]),_:2},1024)]),_:1}),t(u,{prop:"queue_count",label:"queues","min-width":"200px"},{default:e(l=>[t(n,{direction:"vertical"},{default:e(()=>[(o(!0),h(b,null,g(l.row.queue_count,(w,f)=>(o(),c(i,{size:"small",effect:"dark",key:f},{default:e(()=>[a(d(f)+":"+d(w),1)]),_:2},1024))),128))]),_:2},1024)]),_:1}),t(u,{label:"Op","min-width":"100px"},{default:e(l=>[t(p,{type:"danger",onClick:w=>k.stopTask(l.row.uid)},{default:e(()=>[a("Stop")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(n,{direction:"horizontal",fill:!0},{default:e(()=>[t(p,{type:"primary",size:"default",onClick:k.getAll},{default:e(()=>[a("Refresh")]),_:1},8,["onClick"]),t(p,{type:"danger",size:"default",onClick:k.stopAll},{default:e(()=>[a("Stop All")]),_:1},8,["onClick"]),t(p,{type:"info",size:"default",onClick:k.clean},{default:e(()=>[a("Remove Outdated Files")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})}const E=N(V,[["render",I]]);export{E as default};
