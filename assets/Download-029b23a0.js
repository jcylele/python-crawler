import{D as L,a as E,b as I,c as R,A as T}from"./DownloadCtrl-50465ded.js";import{m as j,j as W,a as C,l as U,B as q,k as H,_ as J,o as s,c as _,w as o,r as a,b as t,f as g,g as f,F as h,d as u,t as V,e as A}from"./index-f6f93e37.js";import{D as K,A as M,h as O}from"./DownloadLimit-2779de06.js";import{D as r}from"./Enums-58228667.js";import"./Consts-432b124e.js";const P={components:{DownloadLimit:K},data(){return{down_type:r.New,download_limit:new L,actor_category:0,actor_count:0,actor_urls:[]}},watch:{async actor_category(l,n){if(this.down_type!==r.Category)return;const p=new M;p.category_list=[l];const[b,c]=await O(p);b&&(this.actor_count=c)}},computed:{...j(C,{group_list:"sorted_list",down_group_list:"down_list"}),by_category(){return this.down_type===r.Category},by_url(){return this.down_type===r.Url},down_type_list(){return[{label:"New Actors",value:r.New},{label:"By Category",value:r.Category},{label:"Specific Urls",value:r.Url}]}},methods:{...W(C,{getGroupsFromServer:"getFromServer",getGroup:"get"}),checkActorCategory(){return this.getGroup(this.actor_category)==null?(U("choose correct category"),!1):!0},async download(){if(!this.checkActorCategory())return;let l=!1,n="";switch(this.down_type){case r.New:{[l,n]=await R(this.actor_category,this.download_limit);break}case r.Category:[l,n]=await I(this.actor_category,this.download_limit);break;case r.Url:if(this.actor_urls.length==0){U("no url is assigned");return}[l,n]=await E(this.actor_category,this.download_limit,this.actor_urls);break;default:q("invalid download type");break}l&&H("download started")},onRemoveUrl(l){this.actor_urls.splice(l,1)},onAddUrl(){const l=new T;this.actor_urls.push(l)}},async mounted(){await this.getGroupsFromServer()}};function Q(l,n,p,b,c,i){const D=a("el-radio-button"),x=a("el-radio-group"),N=a("DownloadLimit"),w=a("el-text"),S=a("el-option"),z=a("el-select"),d=a("el-space"),v=a("svg-icon"),k=a("el-input"),y=a("el-form-item"),B=a("el-form"),F=a("el-button");return s(),_(d,{direction:"vertical",fill:!0},{default:o(()=>[t(x,{modelValue:c.down_type,"onUpdate:modelValue":n[0]||(n[0]=e=>c.down_type=e),size:"large"},{default:o(()=>[(s(!0),g(h,null,f(i.down_type_list,e=>(s(),_(D,{value:e.value},{default:o(()=>[u(V(e.label),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"]),t(N,{download_limit:c.download_limit,border:""},null,8,["download_limit"]),t(d,{direction:"horizontal",class:"with-border"},{default:o(()=>[t(w,null,{default:o(()=>[u(" Actor Category ")]),_:1}),t(z,{modelValue:c.actor_category,"onUpdate:modelValue":n[1]||(n[1]=e=>c.actor_category=e),placeholder:"Select",style:{width:"100px"}},{default:o(()=>[(s(!0),g(h,null,f(l.down_group_list,e=>(s(),_(S,{key:e.group_id,label:e.group_name,value:e.group_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),i.by_category?(s(),_(w,{key:0},{default:o(()=>[u(" (including "+V(c.actor_count)+" actors) ",1)]),_:1})):A("",!0)]),_:1}),i.by_url?(s(),_(d,{key:0,direction:"vertical",class:"with-border"},{default:o(()=>[t(d,{direction:"horizontal",size:"large"},{default:o(()=>[t(w,null,{default:o(()=>[u(" Actor Urls ")]),_:1}),t(v,{size:"24px",name:"add",onClick:i.onAddUrl},null,8,["onClick"])]),_:1}),(s(!0),g(h,null,f(c.actor_urls,(e,G)=>(s(),_(d,{direction:"horizontal"},{default:o(()=>[t(B,{model:e,inline:!0},{default:o(()=>[t(y,{label:"Name"},{default:o(()=>[t(k,{modelValue:e.actor_name,"onUpdate:modelValue":m=>e.actor_name=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(y,{label:"Url"},{default:o(()=>[t(k,{modelValue:e.full_url,"onUpdate:modelValue":m=>e.full_url=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(y,null,{default:o(()=>[t(v,{size:"30px",name:"remove",onClick:m=>i.onRemoveUrl(G)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["model"])]),_:2},1024))),256))]),_:1})):A("",!0),t(F,{type:"primary",onClick:i.download},{default:o(()=>[u("Download")]),_:1},8,["onClick"])]),_:1})}const oe=J(P,[["render",Q],["__scopeId","data-v-1b22eece"]]);export{oe as default};
